<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8">
    <title>主页</title>
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
</head>
<body>

<!--头部-->
<div th:replace="component/header::header"></div>

<!--alert-->
<div class="alert alert-success text-center position-fixed custom-alert"
     role="alert">
    <strong></strong>
</div>

<!--推荐理由模态框-->
<div class="modal fade"
     id="recommendReasonModal"
     tabindex="-1"
     aria-labelledby="recommendReasonModal"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"
                    id="exampleModalLabel">
                    推荐理由
                </h5>
                <button name="closeModalBtn"
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div id="graph"
                 class="modal-body"
                 style="width: 500px;height: 400px">
            </div>
            <div class="modal-footer">
                <button name="closeModalBtn"
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!--学术广场标题-->
<div class="text-center">
    <h3 class="d-inline-block"
        style="margin: 20px 0 0 35px;">
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="35" height="35">
            <path d="M692.6 813.6H377.7c-5.7 0-10.3-4.7-10.3-10.3v-6.9c0-5.7 4.7-10.3 10.3-10.3h314.9c5.7 0 10.3 4.7 10.3 10.3v6.9c0.1 5.6-4.6 10.3-10.3 10.3zM440.7 786c102.8-88.5 96.8-208.9 67.5-273.5 54.1-20.9 70.7-37.8 76.3-91.5 60.2 55.4 54.5 295.8 48.2 365h-192z m99.4-428.2c-4.9-2.2-10.1-3.8-15.3-4.9-0.1 0-0.2-0.1-0.3-0.1-5.4-1.1-11.1-1.7-16.8-1.7-45.6 0-82.4 37.3-82.4 83.4 0 5.9 0.7 11.5 1.7 17.1 0 0.1 0.1 0.2 0.1 0.3 1.1 5.3 2.8 10.6 4.9 15.5L326.7 573.6c-13.9 14-36.2 14-50 0l-75-75.8c-13.9-14-13.9-36.6 0-50.5l335.5-339.2c13.9-14 36.2-14 50 0l75 75.8c13.9 14 13.9 36.6 0 50.5L540.1 357.8z" fill="#1976D2">
            </path>
            <path d="M504.7 430.5m-80.3 0a80.3 80.3 0 1 0 160.6 0 80.3 80.3 0 1 0-160.6 0Z" fill="#FFFFFF">
            </path>
            <path d="M248 445.2c-8 0-14.5 6.5-14.5 14.5s6.5 14.5 14.5 14.5 14.5-6.5 14.5-14.5c0-8.1-6.5-14.5-14.5-14.5z m305.3-14.7c0 24.1-19.5 43.6-43.6 43.6-24 0-43.6-19.5-43.6-43.6s19.5-43.6 43.6-43.6c24.1 0.1 43.6 19.6 43.6 43.6z" fill="#42A5F5">
            </path>
            <path d="M297 677.5l-3.7 3.6c-4 4-10.6 4-14.6-0.1L99.8 500c-4-4-4-10.6 0.1-14.6l3.7-3.6c4-4 10.6-4 14.6 0.1L297.1 663c4 3.9 4 10.5-0.1 14.5z" fill="#00BCD4">
            </path>
            <path d="M630.6 602.3c-0.6-4.7-0.8-9.6-1.9-14.1-2.8-11.1 1.4-19.5 9.7-26.1 12.6-10.2 27.7-14.4 43.4-16.3 11-1.3 19 3.7 23.8 13.9 2.6 5.5 5.5 10.6 10 14.9 14 13.4 37.5 7 45.5-9.4 1.9-3.9 4.4-7.7 7.1-11.2 5.3-6.8 12.5-9.3 20.9-8.1 13.5 2 26.5 5.6 37.3 14.4 6.4 5.2 12.3 10.8 14 19.5 1.1 5.3-0.6 10.2-2.3 14.9-1.9 5.3-2.8 10.7-2.3 16.3 1.1 12.7 12.4 23.4 25.2 23.9 6.8 0.3 13.3-1 19.6-3.6 12.6-5.2 23.4-1.8 31.4 9.2 9.2 12.7 13.5 27.3 15.1 42.5 1.1 10.5-4 19-15.8 24.2-5.3 2.3-9.9 5.4-13.9 9.6-13.1 13.9-8.8 36.3 8.5 44.4 5.9 2.8 11.5 6 15.5 11.4 5.1 6.9 6.1 14.5 4.7 22.7-2.3 13-6.3 25.4-15.3 35.5-8.1 9.1-17.9 13.3-30.1 10.2-8.5-2.2-17-3.8-25.9-2.2-9.4 1.7-18 11.1-18.7 20.8-0.4 6.2 0 12.2 2.6 18 5.9 13.2 0.1 26.6-10.3 33.7-11.9 8.1-25 12.9-39.1 14.8-11.7 1.5-21.2-4.6-26.7-16.9-3.6-8.1-8.8-14.6-17-18.3-9.6-4.3-18.7-2.8-26.9 3.4-5.3 3.9-9.4 8.9-11.8 15.1-5.7 14.5-19.5 18.5-31.7 16.2-15.1-2.8-29.4-7.8-41.5-17.7-5.5-4.5-9.6-9.7-10.8-17.1-0.8-5 0.4-9.5 2.1-13.9 2.2-5.7 4.1-11.2 3.8-17.4-0.5-10.4-8.3-19.2-18.6-20.6-8.1-1.1-15.8 0.5-23.6 2.2-11.3 2.6-20.7-0.7-27.7-9.9-9.2-12.1-14.5-25.9-15.5-40.9-0.9-12 3.1-21.8 15.3-26.9 8.8-3.7 16-9.6 20.3-18.3 4.1-8.4 3.5-16.9-2.4-23.9-4-4.8-9-9.9-14.6-11.9-16.1-5.6-21.2-22.8-17.9-36.8 2.9-12.4 6.9-24.3 15.5-34 6.3-7.3 13.9-11.3 24.1-8.4 6.7 1.9 13.4 4.2 20.7 3.7 12.8-0.8 24.6-7.9 25.7-23.9 0.2-2.5 0.3-5 0.5-7.5-0.2-0.1-0.1-0.1 0-0.1z" fill="#43A047">
            </path>
            <path d="M819.3 735.2c0.4 46.1-37.4 83.7-84.5 84.2-46.3 0.5-84.5-37.4-84.6-83.9-0.1-46.1 37-83.2 84-83.8 46.5-0.6 84.8 36.9 85.1 83.5z" fill="#FFFFFF">
            </path>
        </svg>
        学术广场
    </h3>
</div>

<!--学术广场列表-->
<div id="square"
     class="row">
    <div class="col square-rank">
        <h4 class="mt-2 pb-2">顶级期刊</h4>
        <ul class="pl-0">
            <li class="mb-1">
                期刊一
            </li>
            <li class="mb-1">
                期刊二
            </li>
            <li class="mb-1">
                期刊三
            </li>
            <li class="mb-1">
                期刊四
            </li>
            <li>
                期刊五
            </li>
        </ul>
    </div>
    <div class="col square-rank">
        <h4 class="mt-2 pb-2">顶级会议</h4>
        <ul class="pl-0">
            <li class="mb-1">
                会议一
            </li>
            <li class="mb-1">
                会议二
            </li>
            <li class="mb-1">
                会议三
            </li>
            <li class="mb-1">
                会议四
            </li>
            <li>
                会议五
            </li>
        </ul>
    </div>
    <div class="col square-rank">
        <h4 class="mt-2 pb-2">技术洞察</h4>
        <ul class="pl-0">
            <li class="mb-1">
                知识图谱
            </li>
            <li class="mb-1">
                城市计算
            </li>
            <li class="mb-1">
                交通流预测
            </li>
            <li class="mb-1">
                推荐系统
            </li>
            <li>
                问答系统
            </li>
        </ul>
    </div>
</div>

<!--推荐列表标题-->
<div class="text-center">
    <h3 class="d-inline-block" style="margin: 20px 0 0 35px;">
        <svg class="mb-1"
             viewBox="0 0 1024 1024"
             xmlns="http://www.w3.org/2000/svg"
             width="35"
             height="35">
            <path d="M897.8 430.1c-20.4-27.2-50.4-45.7-84-51.6l-169.6-11.7 19.1-203.1c3.7-36-24.5-67.4-60.8-67.4H571c-22 0-42.2 11.8-53.1 30.9L376.5 363.6V865c0 5.2-0.8 10.1-2 14.9l391.2 13.4c60.3-0.5 111.2-44.9 119.9-104.6L923.3 530c5.1-35.4-4-71.3-25.5-99.9z" fill="#FFBA3B">
            </path>
            <path d="M210.3 819.5l-12.5-388.4c0-33.1 33.9-61.5 73.2-63.3l103.5-1 2-3.3V357c0-33.7-27.4-61.1-61.1-61.1H163.6c-33.7 0-61.1 27.4-61.1 61.1v507.8c0 33.7 27.4 61.1 61.1 61.1h151.8c28.6 0 52.4-19.7 59.1-46.2l-92.7-3.2c-33-0.9-71.5-24-71.5-57z" fill="#FB536C">
            </path>
            <path d="M376.5 363.6l-2 3.3-103.5 1c-39.3 1.8-73.2 30.2-73.2 63.3l12.5 388.4c0 33 38.5 56.1 71.4 57.1l92.7 3.2c1.2-4.8 2-9.7 2-14.9V363.6z" fill="#8F3694">
            </path>
        </svg>
        猜你喜欢
    </h3>
</div>

<!--精选 / 各个研究方向-->
<div style="margin-left: 36px;">
    <div id="studySpecialityBtnList" class="btn-group-sm mt-3 d-inline-block" role="group" aria-label="researchDirections">
        <button type="button" class="btn btn-outline-primary ml-2 rounded-pill active">精选</button>
    </div>

    <!--模式切换按钮-->
    <div class="float-right" style="margin: 15px 45px 0 0;">
        <svg id="block-pattern" class="mr-2 toggle-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="25" height="25">
            <path d="M384 480 96 480C44.8 480 0 435.2 0 384L0 96C0 44.8 44.8 0 96 0L384 0c51.2 0 96 44.8 96 96L480 384C480 435.2 435.2 480 384 480z">
            </path>
            <path d="M384 1024 96 1024C44.8 1024 0 979.2 0 928L0 640c0-51.2 44.8-96 96-96L384 544c51.2 0 96 44.8 96 96l0 281.6C480 979.2 435.2 1024 384 1024z">
            </path>
            <path d="M787.2 1024 787.2 1024c-134.4 0-243.2-108.8-243.2-236.8l0 0c0-134.4 108.8-236.8 236.8-236.8l0 0c134.4 0 236.8 108.8 236.8 236.8l0 0C1024 915.2 915.2 1024 787.2 1024z">
            </path>
            <path d="M928 480 640 480C588.8 480 544 435.2 544 384L544 96C544 44.8 588.8 0 640 0l281.6 0C979.2 0 1024 44.8 1024 96L1024 384C1024 435.2 979.2 480 928 480z">
            </path>
        </svg>
        <svg id="item-pattern" class="toggle-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="25" height="25">
            <path d="M192 224c0 35.36-28.64 64-64 64L64 288C28.64 288 0 259.36 0 224L0 160c0-35.36 28.64-64 64-64l64 0c35.36 0 64 28.64 64 64L192 224z">
            </path>
            <path d="M192 544c0 35.328-28.64 64-64 64L64 608c-35.36 0-64-28.672-64-64l0-64c0-35.36 28.64-64 64-64l64 0c35.36 0 64 28.64 64 64L192 544z">
            </path>
            <path d="M192 864c0 35.328-28.64 64-64 64L64 928c-35.36 0-64-28.672-64-64l0-64c0-35.36 28.64-64 64-64l64 0c35.36 0 64 28.64 64 64L192 864z">
            </path>
            <path d="M1024 224c0 35.36-28.64 64-64 64L384 288c-35.36 0-64-28.64-64-64L320 160c0-35.36 28.64-64 64-64l576 0c35.36 0 64 28.64 64 64L1024 224z">
            </path>
            <path d="M1024 544c0 35.328-28.64 64-64 64L384 608c-35.36 0-64-28.672-64-64l0-64c0-35.36 28.64-64 64-64l576 0c35.36 0 64 28.64 64 64L1024 544z">
            </path>
            <path d="M1024 864c0 35.328-28.64 64-64 64L384 928c-35.36 0-64-28.672-64-64l0-64c0-35.36 28.64-64 64-64l576 0c35.36 0 64 28.64 64 64L1024 864z">
            </path>
        </svg>
    </div>
</div>

<!--推荐列表-->
<div id="recommend-tutor-list" class="float-left w-100">
    <div class="text-center">
        <h3 class="spinner-border text-primary"
            role="status"
            style="position: relative;top: 50px;width: 4rem;height: 4rem;">
            <span class="sr-only">Loading...</span>
        </h3>
    </div>
</div>

<!--尾部-->
<div th:replace="component/footer::footer"></div>

<script type="text/javascript">
    let myChart
    let recommendPageNum = 1
    let activeBtnIndex = 0
    let isBlock = true

    $(document).ready(function () {
        // 模式切换按钮
        let blockPattern = $("#block-pattern")
        let itemPattern = $("#item-pattern")

        blockPattern.css("fill", "#007bff")
            .css("boxShadow", "0 0 4px 0px #6b6b6b")
        itemPattern.css("fill", "#6b6b6b")

        // 获取推荐列表
        getRecommendList()

        // 获取推荐列表的标签
        getTutorStudySpecialityList()

        // 模式切换
        blockPattern.click(function () {
            if (isBlock) {
                return
            }

            isBlock = true
            // 改变模式按钮样式
            $(this).css("fill", "#007bff")
                .css("boxShadow", "0 0 4px 0px #6b6b6b")
            itemPattern.css("fill", "#6b6b6b")
                .css("boxShadow", "")
            // 改变标签样式
            $(".badge").addClass("custom-badge")
            // 推荐列表
            let itemList = $(".recommend-tutor")
            itemList.css({"width": "30%", "display": "none"})
            itemList.each(function() {
                $("p:gt(0):lt(4)", this).css("display", "")
                    .removeClass("mr-5")
                $("p:gt(4)", this).css("display", "none")
            })
            // 淡入
            itemListFadeIn(itemList, {"display": "inline-block"})
            // 发现更多按钮
            $("#nextRecommendPageButton").css("width", "10%")
        })
        itemPattern.click(function () {
            if (!isBlock) {
                return
            }

            isBlock = false
            // 改变模式按钮样式
            $(this).css("fill", "#007bff")
                .css("boxShadow", "0 0 4px 0px #6b6b6b")
            blockPattern.css("fill", "#6b6b6b")
                .css("boxShadow", "")
            // 改变标签样式
            $(".badge").removeClass("custom-badge")
            // 推荐列表
            let itemList = $(".recommend-tutor")
            itemList.css({"width": "95%", "display": "none"})
            itemList.each(function() {
                $("p:gt(0):lt(4)", this).css("display", "inline-block")
                    .addClass("mr-5")
                $("p:gt(4)", this).css("display", "")
            })
            // 淡入
            itemListFadeIn(itemList, {"display": "inline-block"})
            // 发现更多按钮
            $("#nextRecommendPageButton").css("width", "95%")
        })

        // 销毁关系图
        $("[name='closeModalBtn']").click(function () {
            if (!isEmpty(myChart) && !myChart.isDisposed()) {
                myChart.dispose()
            }
        })
    })

    // 获取推荐列表
    function getRecommendList() {
        $.ajax({
            type: 'GET',
            url: BASE_URL+"recommend/search?pageNum=1&pageSize=5",
            dataType: "html",
            headers: getToken(),
            success: res => {
                try {
                    res = JSON.parse(res)
                    console.error(res)
                } catch (e) {
                    $("#recommend-tutor-list").html(res)
                    // 显示header的头像
                    $("#avatar").css("display", "")

                    let itemList = $(".recommend-tutor")
                    // 查找相似按钮淡入淡出动画
                    fadeAnimation(itemList, ".relative-btn")
                    // 列表淡入
                    itemListFadeIn(itemList, {"display": "inline-block"})
                    // 阴影动画
                    shadowAnimation(itemList)
                }
            },
            error: res => {
                console.error(res)
            }
        })
    }

    // 获取导师研究方向标签列表
    function getTutorStudySpecialityList() {
        $.ajax({
            type: 'GET',
            url: BASE_URL+"recommend/label/list",
            dataType: "html",
            headers: getToken(),
            success: res => {
                try {
                    res = JSON.parse(res)
                    console.error(res)
                } catch (e) {
                    $(".btn-group-sm").append(res)

                    // 推荐列表筛选
                    $(".btn-group-sm button").click(function () {
                        let studySpecialityBtnList = $("#studySpecialityBtnList button")
                        let currActiveBtnIndex = studySpecialityBtnList.index(this)
                        if (activeBtnIndex === currActiveBtnIndex) {
                            return
                        }
                        studySpecialityBtnList.eq(activeBtnIndex).removeClass("active")
                        $(this).addClass("active")
                        activeBtnIndex = currActiveBtnIndex

                        let studySpeciality = ""
                        if (activeBtnIndex !== 0) {
                            studySpeciality = $(this).text()
                        }
                        $.ajax({
                            type: 'GET',
                            url: BASE_URL+"recommend/search?pageNum=1&pageSize=5&studySpeciality=" + studySpeciality,
                            dataType: "html",
                            headers: getToken(),
                            success: res => {
                                try {
                                    res = JSON.parse(res)
                                    console.error(res)
                                } catch (e) {
                                    $("#recommend-tutor-list").html(res)

                                    let itemList = $(".recommend-tutor")
                                    if (!isBlock) {
                                        itemList.css({"width": "95%"})
                                        itemList.each(function() {
                                            $(".badge", this).removeClass("custom-badge")
                                            $("p:gt(0):lt(4)", this).css("display", "inline-block")
                                                .addClass("mr-5")
                                            $("p:gt(4)", this).css("display", "")
                                        })
                                        $("#nextRecommendPageButton").css("width", "95%")
                                    }

                                    // 查找相似按钮淡入淡出动画
                                    fadeAnimation(itemList, ".relative-btn")
                                    // 淡入
                                    itemListFadeIn(itemList, {"display": "inline-block"})
                                    // 阴影动画
                                    shadowAnimation(itemList)

                                    recommendPageNum = 1
                                }
                            },
                            error: res => {
                                console.error(res)
                            }
                        })
                    })
                }
            },
            error: res => {
                console.error(res)
            }
        })
    }

    // 收藏
    function addCF(tutorNeo4jId) {
        if (hasToken()) {
            $.ajax({
                contentType: 'application/json',
                type: 'POST',
                url: BASE_URL+"cf/add",
                dataType: "json",
                headers: getToken(),
                data: JSON.stringify(tutorNeo4jId),
                success: res => {
                    if (res.result_code !== 0) {
                        removeToken()
                    }
                }
            })
        }
    }

    // 收藏
    function addFavorite(tutorNeo4jId) {
        // alert
        const alertComp = $(".alert")
        const msgComp = $(".alert strong")
        $.ajax({
            contentType: 'application/json',
            type: 'POST',
            url: BASE_URL+"favorite/add",
            dataType: "json",
            headers: getToken(),
            data: JSON.stringify(tutorNeo4jId),
            success: res => {
                if (res.result_code === 0) {
                    alertMsg(alertComp, msgComp, "收藏成功")
                    $("#add"+tutorNeo4jId).removeClass("d-none")
                    $("#delete"+tutorNeo4jId).addClass("d-none")
                }
                else {
                    alertMsg(alertComp, msgComp, "收藏失败")
                }
            },
            error: res => {
                alertMsg(alertComp, msgComp, "收藏失败")
            }
        })
    }

    // 取消收藏
    function deleteFavorite(tutorNeo4jId) {
        // alert
        const alertComp = $(".alert")
        const msgComp = $(".alert strong")
        $.ajax({
            contentType: 'application/json',
            type: 'DELETE',
            url: BASE_URL+"favorite/delete",
            dataType: "json",
            headers: getToken(),
            data: JSON.stringify(tutorNeo4jId),
            success: res => {
                if (res.result_code === 0) {
                    alertMsg(alertComp, msgComp, "取消收藏成功")
                    $("#add"+tutorNeo4jId).addClass("d-none")
                    $("#delete"+tutorNeo4jId).removeClass("d-none")
                }
                else {
                    alertMsg(alertComp, msgComp, "取消收藏失败")
                }
            },
            error: res => {
                alertMsg(alertComp, msgComp, "取消收藏失败")
            }
        })
    }

    // 推荐理由
    function getRecommendReason(tutorNeo4jId) {
        $.ajax({
            type: 'GET',
            url: BASE_URL+"recommend/reason?neo4jId="+tutorNeo4jId,
            dataType: "json",
            headers: getToken(),
            success: res => {
                let graph = $("#graph")
                if (isEmpty(res.data)) {
                    graph.text("无推荐理由")
                }
                // 若存在链路，绘制关系图
                if (!isEmpty(res.data.links)) {
                    res.data.links.forEach(function (link) {
                        link.value = RELATION_TYPE[link.value]
                    })
                    drawGraph(res.data.data, res.data.links)
                } else {
                    graph.html("")
                    for (let i = 0; i < res.data.data.length; i++) {
                        graph.append(
                            '<div class="card mb-3">\n' +
                            '  <div class="card-body">\n' +
                            '    <h5 class="card-title">' + res.data.data[i].name + '</h5>\n' +
                            '    <h6 class="card-subtitle mb-2 text-muted">' + res.data.data[i].cn_name + '</h6>\n' +
                            '    <a class="card-link float-right">已发表' + res.data.data[i].count_a + '篇</a>\n' +
                            '  </div>\n' +
                            '</div>')
                    }
                }
            },
            error: res => {
                console.error(res)
            }
        })
    }

    // 绘制图结构
    function drawGraph(data, links) {
        if (!isEmpty(myChart) && !myChart.isDisposed()) {
            //销毁
            myChart.dispose()
        }

        let chartDom = document.getElementById('graph')
        myChart = echarts.init(chartDom)
        let option

        option = {
            tooltip: {},
            legend: [{
                data: ENTITY_TYPE.map(function (a) {
                    return a.name
                })
            }],
            animationDurationUpdate: 1500,
            animationEasingUpdate: 'quinticInOut',
            series: [
                {
                    type: 'graph',
                    layout: 'force',
                    symbolSize: 45,
                    focusNodeAdjacency: true,
                    roam: true,
                    edgeSymbol: ['none', 'arrow'],
                    label: {
                        normal: {
                            show: true,
                            textStyle: {
                                fontSize: 12,
                            },
                        }
                    },
                    force: {
                        repulsion: 2000
                    },
                    edgeSymbolSize: [4, 10],
                    edgeLabel: {
                        normal: {
                            show: true,
                            textStyle: {
                                fontSize: 10
                            },
                            formatter: '{c}'
                        }
                    },
                    categories: ENTITY_TYPE,
                    data: data,
                    links: links,
                    lineStyle: {
                        opacity: 0.9,
                        width: 2
                    }
                }
            ]
        };

        option && myChart.setOption(option)
    }

    // 发现更多
    function nextRecommendPage() {
        let studySpeciality = ""
        if (activeBtnIndex !== 0) {
            studySpeciality = $("#studySpecialityBtnList button").eq(activeBtnIndex).text()
        }
        $.ajax({
            type: 'GET',
            url: BASE_URL+"recommend/search?pageNum="+(recommendPageNum+1)+"&pageSize=5&studySpeciality=" + studySpeciality,
            dataType: "html",
            headers: getToken(),
            success: res => {
                try {
                    res = JSON.parse(res)
                    console.error(res)
                } catch (e) {
                    $("#nextRecommendPageButton").remove()
                    $("#recommend-tutor-list").append(res)

                    let itemList = $(".recommend-tutor").slice(recommendPageNum*5)
                    if (!isBlock) {
                        itemList.css({"width": "95%"})
                        itemList.each(function() {
                            $(".badge", this).removeClass("custom-badge")
                            $("p:gt(0):lt(4)", this).css("display", "inline-block")
                                .addClass("mr-5")
                            $("p:gt(4)", this).css("display", "")
                        })
                        $("#nextRecommendPageButton").css("width", "95%")
                    }

                    // 查找相似按钮淡入淡出动画
                    fadeAnimation(itemList, ".relative-btn")
                    // 淡入
                    itemListFadeIn(itemList, {"display": "inline-block"})
                    // 阴影动画
                    shadowAnimation(itemList)

                    recommendPageNum++
                }
            },
            error: res => {
                console.error(res)
            }
        })
    }
</script>
</body>
</html>
